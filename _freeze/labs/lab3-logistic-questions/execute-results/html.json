{
  "hash": "0c1d2b2e42cc8f2a86392934666894de",
  "result": {
    "markdown": "---\ntitle: \"Lab 3: Logistic Regression\"\nauthor: \"Chris Slaughter\"\nname: labs/lab3-logistic-questions.qmd\ntoc: true\n---\n\n\n## Introduction\n\nIn this lab, we will use logistic regression to analyze the salary dataset. We will consider the covariates gender and year of degree.\n\n### Setup\n\nLoad packages\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: Hmisc\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'Hmisc'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    format.pval, units\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWelcome to contingencytables 3.0.0.\nPlease run ?chapX or list_functions(x) to see the functions related to chapter X.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: zoo\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'zoo'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'lmtest'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:rms':\n\n    lrtest\n```\n:::\n:::\n\n\n-   The contigencytables packages contains a function for calculating the likelihood ratio test for 2x2 tables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nperondi_2004\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     [,1] [,2]\n[1,]    7   27\n[2,]    1   33\n```\n:::\n\n```{.r .cell-code}\nLR_test_2x2(perondi_2004)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe likelihood ratio test: P = 0.01733, T = 5.663 (df = 1)\n```\n:::\n:::\n\n\n## Part 1: Initial dataset manipulation\n\n### 1. Read in the salary dataset\n\n### 2. Remove all observations that are not from 1995\n\n### 3. Create an indicator variable for male gender\n\n### 4. Create a new outcome variable (salhigh) to indicate if salary is above \\$7600 per month.\n\n#### 4.1 What proportion of subjects have a salary above \\$7600\n\n## Part 2: High salary and gender (unadjusted model)\n\nIn part 2, we will estimate the association between salary and gender. First, we will conduct this analysis using the familiar method, a 2x2 table. We will then conduct the same analysis using logistic regression and compare the two approaches\n\n### 1. Create a 2x2 contingency table of salhigh by male. From this table, calculate\n\n#### 1.1. Pearson's Chi-squared test statistic (without continuity correction)\n\n#### 1.2. The likelihood ratio Chi-squared test statistic\n\n#### 1.3. The odds of high salary for males compared to the odds of a high salary for females (the odds ratio). Interpret\n\n#### 1.4. The standard error of the log odds ratio (hint: the variance of the log odds ratio is given by 1/a + 1/b + 1/c + 1/d where a, b, c, and d are the cell totals)\n\n#### 1.5. Pr(high salary \\| male)\n\n#### 1.6. Pr(high salary \\| female)\n\n### 2. Conduct a logistic regression of male on salhigh. From the regression output, calculate or identify\n\n#### 2.1. The Wald Chi-squared test statistic (hint: Recall if Z is Standard Normal, the Z\\^2 follow a Chi-squared distribution)\n\n#### 2.2. The likelihood ratio Chi-squared statistic\n\n#### 2.3. The odds of high salary for males compared to the odds of a high salary for females (the odds ratio). Interpret the odds ratio.\n\n#### 2.4. The standard error of the log odds ratio\n\n#### 2.5. Pr(high salary \\| male)\n\n#### 2.6. Pr(high salary \\| female)\n\n### 3. Obtain estimates for the predicted probabilities 2.5 and 2.6 (use Stata or R commands to get these numbers)\n\n## Part 3: High salary and year of degree (unadjusted model)\n\n### 1. Create suitable summary statistics for the probability of high salary by year of degree\n\n### 2. Fit a logistic regression model with salhigh and yrdeg\n\n#### 2.1. Calculate the odds ratio and interpret the results\n\n### 3. Suppose the investigators would rather model the number of years it has been since each professor has achieved his or her degree\n\n#### 3.1. Create a new variable yrssince95 = 95 - yrdeg\n\n#### 3.2. Fit a logistic regression model with salhigh and yrssince95\n\n#### 3.3. Compare the output from model 3.2 with 2.1\n\n### 4. From model 3.2, create a variable for the predicted probability of having a high salary.\n\n#### 4.1. Calculate the odds and log odds of having a high salary\n\n#### 4.2. Plot yrssince95 versus the log odds of a having a high salary\n\n#### 4.3. Plot yrssince95 versus the odds of having a high salary\n\n#### 4.4. Plot yrssince95 versus the probability of having a high salary\n\n### 5. Conduct a likelihood ratio test to test the statistical significance of yrssince95\n\n#### 5.1. Fit a logistic regression model with just the intercept. Save the deviance from this model\n\n#### 5.2. Fit logistic regression model 3.2. Save the deviance from this model.\n\n#### 5.3. Subtract the deviance obtained from 5.2 from the deviance obtained from 5.1. Compare this result to the likelihood ratio test statistic given in the output from model 3.2 (and 2.1)\n",
    "supporting": [
      "lab3-logistic-questions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}